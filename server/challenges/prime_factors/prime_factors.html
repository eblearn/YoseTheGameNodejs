<!DOCTYPE html>
<html>
    <head>
        <title>Facteurs premiers</title>
		<script type="text/javascript">
			
			function decomposeNumbers() {
				var xmlHttp = null;
				var enteredNumber = document.getElementById("number").value;
				var url = "/primeFactors?number=" + enteredNumber;
				
				xmlHttp = new XMLHttpRequest();
				
				xmlHttp.onreadystatechange=function() {
					if (xmlHttp.readyState==4 && xmlHttp.status==200) {
						var number = JSON.parse(xmlHttp.responseText);
						displayNumber(number);
					}
				}
				
				xmlHttp.open("GET", url, true);
				xmlHttp.send();
				
			}
			
			function displayNumber(number) {
				var resultDiv = document.getElementById("result");
				if (number.error == undefined) {
					resultDiv.innerHTML = number.number + " = " + number.decomposition.join(' x ');
				} else {
					resultDiv.innerHTML = number.error;
				}				
			}
						
		</script>
	</head>
    <body>
		<div id="title">Facteurs premiers !!!</div>
		<div id="invitation">
			Saisissez une série de nombres qui seront décomposés.
		</div>
		<div id="enter">
			<input id="number" type="text"><button id="go" type="button" onclick="decomposeNumbers()">Decomposer ...</button>
		</div>	
		<div id="result">42 = 2 x 3 x 7</div>
	</body>
</html>